---
import newsletterBg from "../../assets/newsletter/newsletter-bg.svg";
---

<section
  id="newsletter"
  class="newsletter"
>
  <div class="newsletter__content-wrapper">
    <div class="newsletter__content">
      <p class="newsletter__heading">Our Subscribe</p>
      <h1 class="newsletter__title">
        Subscribe To Get The Latest Promo from Jez Salad
      </h1>
      <p class="newsletter__sub-title">
        We recommended you to subscribe to our promo program, drop your email
        below to get daily update about us
      </p>
      <form class="newsletter__input">
        <input
          id="email"
          type="email"
          class="newsletter__input"
          placeholder="Enter your email address"
          required
        />
        <button
          type="submit"
          class="newsletter__input-btn"
          >Subscribe</button
        >
      </form>
    </div>

    <div class="newsletter__bg">
      <img
        class="newsletter__img"
        src={newsletterBg}
        alt="newsletter-bg"
        loading="lazy"
      />
    </div>
  </div>
</section>

<style lang="scss">
  @import "../../styles/common.scss";
  .newsletter {
    padding: 3rem $sm-padding-x;

    text-align: center;

    @include devices(lg) {
      padding: 4rem $lg-padding-x;
    }

    @include devices(xl) {
      padding: 6rem $xl-padding-x;
    }

    @include devices(2xl) {
      padding: 10rem $_2xl-padding-x;
    }

    &__content-wrapper {
      position: relative;
      width: 100%;
      height: 100%;

      padding: 4rem 3rem 8rem 3rem;
      background-color: #fff1de;
      border-radius: 50px;
      z-index: 10;
    }

    &__content {
      @include devices(lg) {
        width: 60%;
        margin: 0 auto;
      }

      @include devices(xl) {
        width: 70%;
      }

      @include devices(3xl) {
        width: 50%;
      }
    }

    &__heading {
      font-size: clamp(1.6rem, 2vw, 2rem);
      color: #fb9333;
    }

    &__title {
      font-size: clamp(2rem, 3.5vw, 4.8rem);
      line-height: 140%;
      color: #585858;
    }

    &__sub-title {
      width: 95%;
      margin: 2rem auto 6rem auto;

      font-size: 1.4rem;
      color: #575757;
      line-height: 160%;

      @include devices(xl) {
        width: 60%;
        margin: 2rem auto 8rem auto;
      }
    }

    &__input {
      position: relative;
      transition: all 0.5s ease;
    }

    &__input input {
      padding: 1.5rem 2rem;
      width: 100%;
      border: none;
      border-radius: 100px;

      font-size: 1.6rem;
    }

    &__input-btn {
      position: absolute;
      top: 50%;
      right: 4px;
      transform: translate(0, -50%);

      border-radius: 100px;
      background-color: #fb9333;
      color: #fff;

      border: none;
      height: 85%;
      min-width: fit-content;
      width: 25%;

      font-size: 1.4rem;

      cursor: pointer;
    }

    &__bg {
      position: absolute;
      top: 0;
      left: -3%;

      height: 100%;
      width: 100%;
      margin: 0 auto;

      z-index: -1;
    }

    &__img {
      height: 120%;
      width: 100%;

      @include devices(lg) {
        display: none;
      }
    }
  }

  .hidden {
    opacity: 0;
    transform: scale(0.9);
  }
</style>

<script>
  import observer from "../../utils/observer";
  document
    .querySelector(".newsletter__input")
    ?.addEventListener("submit", function (this: HTMLFormElement, e: Event) {
      // input type='email' invalid, no submit event fires
      if (!e) return;

      e.preventDefault();
      // form submission logic here ---
      this.reset();
    });

  const input = document.querySelector(".newsletter__input") as Element;

  observer.observe(input);
</script>
